{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=gamedata.db"
  },
  "Economy": {
    "DefaultDropMode": "expected"
  },
  "Combat": {
    "EnablePeriodicRewards": true,
    "RewardFlushIntervalSeconds": 10.0
  },
  "Offline": {
    "OfflineDetectionSeconds": 60,
    "MaxOfflineSeconds": 43200,
    "AutoApplyRewards": true
  },
  "Jwt": {
    "SecretKey": "CHANGE-THIS-TO-A-SECURE-RANDOM-KEY-IN-PRODUCTION-AT-LEAST-32-CHARACTERS",
    "Issuer": "BlazorIdle.Server",
    "Audience": "BlazorIdle.Client",
    "ExpirationMinutes": 1440
  },
  "SignalR": {
    "HubEndpoint": "/hubs/battle",
    "EnableSignalR": true,
    "MaxReconnectAttempts": 3,
    "ReconnectBaseDelayMs": 2000,
    "MaxReconnectDelayMs": 60000,
    "EnableDetailedLogging": false,
    "ConnectionTimeoutSeconds": 60,
    "KeepAliveIntervalSeconds": 30,
    "ServerTimeoutSeconds": 60,
    "Notification": {
      "EnablePlayerDeathNotification": true,
      "EnablePlayerReviveNotification": true,
      "EnableEnemyKilledNotification": true,
      "EnableTargetSwitchedNotification": true,
      "EnableWaveSpawnNotification": true,
      "EnableSkillCastNotification": true,
      "EnableBuffChangeNotification": false
    },
    "Performance": {
      "EnableThrottling": true,
      "ThrottleWindowMs": 500,
      "EnableBatching": true,
      "BatchDelayMs": 50,
      "AutoDegradeOnMobile": true
    }
  },
  "Shop": {
    "EnableCaching": true,
    "ShopDefinitionCacheMinutes": 60,
    "ShopItemsCacheMinutes": 30,
    "ConfigPath": "Config/Shop",
    "ShopDefinitionsFile": "ShopDefinitions.json",
    "ShopItemsFile": "ShopItems.json",
    "DefaultRefreshIntervalSeconds": 3600,
    "MaxShopNameLength": 50,
    "MaxShopDescriptionLength": 200,
    "MaxItemNameLength": 100,
    "MaxItemDescriptionLength": 500,
    "UnlimitedStock": -1,
    "DailyResetSeconds": 86400,
    "WeeklyResetSeconds": 604800,
    "DefaultDailyLimit": 10,
    "DefaultWeeklyLimit": 5,
    "MinPriceAmount": 1,
    "MaxPriceAmount": 1000000,
    "MinLevelRequirement": 1,
    "MaxLevelRequirement": 100,
    "MinPurchaseQuantity": 1,
    "MaxPurchaseQuantity": 999,
    "DefaultPageSize": 20,
    "MaxPageSize": 100,
    "PurchaseHistoryDefaultDays": 30
  },
  "Persistence": {
    "EnableMemoryBuffering": true,
    "SaveIntervalMs": 30000,
    "MaxBatchSize": 1000,
    "ForceSaveThreshold": 5000,
    "SaveRetryAttempts": 3,
    "EntitySaveStrategies": {
      "BattleSnapshot": {
        "SaveIntervalMs": 60000,
        "MaxBatchSize": 500
      },
      "CharacterHeartbeat": {
        "SaveIntervalMs": 300000,
        "MaxBatchSize": 1000
      },
      "ActivityPlan": {
        "SaveIntervalMs": 30000,
        "MaxBatchSize": 200
      }
    }
  },
  "Shutdown": {
    "ShutdownTimeoutSeconds": 30,
    "SetCharactersOfflineOnShutdown": true,
    "ForceWalCheckpointOnShutdown": true,
    "ShutdownSaveRetryAttempts": 5
  },
  "MemoryCache": {
    "MaxCachedEntities": 100000,
    "EvictionPolicy": "LRU",
    "TimeToLiveSeconds": 3600
  },
  "Monitoring": {
    "MaxRecentOperations": 100,
    "EnableDetailedLogging": false,
    "DefaultTimeWindowMinutes": 10,
    "MemoryStateSnapshotIntervalSeconds": 0,
    "CacheMonitoring": {
      "EnableCacheMetrics": true,
      "TrackPerEntityMetrics": true,
      "CacheMetricsIntervalSeconds": 60,
      "LogCacheAccess": false,
      "CacheHitRateThreshold": 70.0
    }
  },
  "CacheConfiguration": {
    "EntityStrategies": {
      "GearDefinition": {
        "Strategy": "Permanent",
        "PreloadOnStartup": true,
        "PreloadBatchSize": 500,
        "MaxCachedCount": 10000,
        "TtlSeconds": 86400
      },
      "Affix": {
        "Strategy": "Permanent",
        "PreloadOnStartup": true,
        "PreloadBatchSize": 1000,
        "MaxCachedCount": 10000,
        "TtlSeconds": 86400
      },
      "GearSet": {
        "Strategy": "Permanent",
        "PreloadOnStartup": true,
        "PreloadBatchSize": 100,
        "MaxCachedCount": 1000,
        "TtlSeconds": 86400
      },
      "Character": {
        "Strategy": "Temporary",
        "TtlSeconds": 3600,
        "MaxCachedCount": 10000,
        "PreloadOnStartup": false
      },
      "GearInstance": {
        "Strategy": "Temporary",
        "TtlSeconds": 1800,
        "MaxCachedCount": 50000,
        "PreloadOnStartup": false
      },
      "ActivityPlan": {
        "Strategy": "Temporary",
        "TtlSeconds": 900,
        "MaxCachedCount": 20000,
        "PreloadOnStartup": false
      },
      "RunningBattleSnapshot": {
        "Strategy": "Temporary",
        "TtlSeconds": 600,
        "MaxCachedCount": 5000,
        "PreloadOnStartup": false
      }
    },
    "GlobalSettings": {
      "EnableReadCaching": true,
      "CleanupIntervalMinutes": 5,
      "TrackCacheHitRate": true,
      "HitRateLogIntervalMinutes": 10
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "BlazorIdle.Server.Application.Shop": "Information",
      "BlazorIdle.Server.Domain.Shop": "Warning",
      "BlazorIdle.Server.Application.Economy": "Information",
      "BlazorIdle.Server.Application.Battles": "Warning"
    }
  }
}
