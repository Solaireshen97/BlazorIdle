# Phase 5-7 å®æ–½æ€»ç»“ - æ—¥å¿—ä¸ç›‘æ§ä¼˜åŒ–

**é¡¹ç›®**: BlazorIdle  
**é˜¶æ®µ**: Phase 5-7 - ä¸­ç¯‡ï¼ˆæ—¥å¿—ä¸ç›‘æ§ä¼˜åŒ–ï¼‰  
**å®æ–½æ—¥æœŸ**: 2025-10-15  
**çŠ¶æ€**: âœ… è®¾è®¡å®Œæˆ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æœ¬æ¬¡å®æ–½å®Œæˆäº†æœåŠ¡ç«¯ä»£ç ä¼˜åŒ–æ–¹æ¡ˆä¸­ç¯‡ï¼ˆPhase 5-7ï¼‰çš„è®¾è®¡å’Œè§„åˆ’å·¥ä½œï¼ŒåŒ…æ‹¬ï¼š
1. **Phase 5: æ—¥å¿—ç³»ç»Ÿè®¾è®¡** - åˆ¶å®šå®Œæ•´çš„æ—¥å¿—è§„èŒƒå’Œå®æ–½è®¡åˆ’
2. **Phase 6: æ€§èƒ½ç›‘æ§ä¸æŒ‡æ ‡** - è®¾è®¡ç›‘æ§æŒ‡æ ‡ä½“ç³»
3. **Phase 7: é˜¶æ®µæ€§æµ‹è¯•ä¸æ–‡æ¡£** - è§„åˆ’æµ‹è¯•å’ŒéªŒæ”¶æ ‡å‡†

å…¨ç¨‹éµå¾ª**é›¶åŠŸèƒ½æ”¹åŠ¨**åŸåˆ™ï¼Œæ‰€æœ‰è®¾è®¡å‡ä¸ºå¢å¼ºå¯è§‚æµ‹æ€§ï¼Œä¸å½±å“ä¸šåŠ¡é€»è¾‘ã€‚

---

## âœ… Phase 5: æ—¥å¿—ç³»ç»Ÿè®¾è®¡

### ä¸»è¦æˆæœ

#### 1. æ—¥å¿—è§„èŒƒæ–‡æ¡£åˆ¶å®š

åˆ›å»ºäº† `æ—¥å¿—è§„èŒƒæ–‡æ¡£.md`ï¼ŒåŒ…å«ï¼š
- **æ—¥å¿—çº§åˆ«è§„èŒƒ** - 6ä¸ªçº§åˆ«çš„è¯¦ç»†å®šä¹‰å’Œä½¿ç”¨åœºæ™¯
- **ç»“æ„åŒ–æ—¥å¿—æ ‡å‡†** - ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼å’Œå‚æ•°å‘½åè§„èŒƒ
- **æ—¥å¿—æ¨¡æ¿** - 8ç±»å¸¸ç”¨åœºæ™¯çš„æ—¥å¿—æ¨¡æ¿
- **æ ¸å¿ƒä¸šåŠ¡æµç¨‹æ—¥å¿—è§„èŒƒ** - 5å¤§ç³»ç»Ÿçš„è¯¦ç»†æ—¥å¿—ç‚¹å®šä¹‰
- **æ—¥å¿—é…ç½®** - appsettings.json é…ç½®ç¤ºä¾‹
- **æ—¥å¿—æŸ¥è¯¢** - åŸºæœ¬æŸ¥è¯¢å’Œç»“æ„åŒ–æŸ¥è¯¢æ–¹æ³•
- **æœ€ä½³å®è·µ** - DO/DON'T æŒ‡å—å’Œæ€§èƒ½è€ƒè™‘

**æ–‡æ¡£ç‰¹ç‚¹**ï¼š
- âœ… å®Œæ•´è¦†ç›–æ‰€æœ‰æ—¥å¿—åœºæ™¯
- âœ… è¯¦ç»†çš„ç¤ºä¾‹ä»£ç 
- âœ… æ¸…æ™°çš„å†³ç­–æ ‘
- âœ… å®ç”¨çš„æ¨¡æ¿åº“

#### 2. æ—¥å¿—å®æ–½è®¡åˆ’åˆ¶å®š

åˆ›å»ºäº† `Phase5-å®æ–½è®¡åˆ’.md`ï¼ŒåŒ…å«ï¼š
- **å½“å‰çŠ¶æ€åˆ†æ** - 96å¤„ç°æœ‰æ—¥å¿—çš„åˆ†å¸ƒç»Ÿè®¡
- **ç›®æ ‡è®¾å®š** - é‡åŒ–ç›®æ ‡ï¼ˆâ‰¥150å¤„æ—¥å¿—ï¼‰å’Œè´¨é‡ç›®æ ‡
- **å®æ–½è®¡åˆ’** - 4æ‰¹æ¬¡åˆ†é˜¶æ®µå®æ–½
  - ç¬¬ä¸€æ‰¹ï¼šæ ¸å¿ƒæˆ˜æ–—ç³»ç»Ÿï¼ˆP0ï¼‰- 20-25å¤„
  - ç¬¬äºŒæ‰¹ï¼šç»æµç³»ç»Ÿï¼ˆP0ï¼‰- 10-15å¤„
  - ç¬¬ä¸‰æ‰¹ï¼šè£…å¤‡ç³»ç»Ÿï¼ˆP1ï¼‰- 15-20å¤„
  - ç¬¬å››æ‰¹ï¼šæ´»åŠ¨è®¡åˆ’ç³»ç»Ÿï¼ˆP1ï¼‰- 10-15å¤„
- **æµ‹è¯•è®¡åˆ’** - åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•ã€è´¨é‡æ£€æŸ¥
- **éªŒæ”¶æ ‡å‡†** - P0/P1/P2 ä¸‰çº§æ ‡å‡†

#### 3. æ—¥å¿—ç³»ç»Ÿè®¾è®¡è¦ç‚¹

**æˆ˜æ–—ç³»ç»Ÿæ—¥å¿—å¢å¼º**ï¼š
```csharp
// æˆ˜æ–—å¼€å§‹
_logger.LogInformation(
    "æˆ˜æ–—å¼€å§‹ï¼ŒBattleId={BattleId}, CharacterId={CharacterId}, EnemyId={EnemyId}, Mode={Mode}",
    battleId, characterId, enemyId, mode
);

// æˆ˜æ–—ç»“æŸ
_logger.LogInformation(
    "æˆ˜æ–—ç»“æŸï¼ŒBattleId={BattleId}, Result={Result}, Duration={DurationSeconds}s, EventCount={EventCount}, Victory={Victory}",
    battleId, result, duration, eventCount, victory
);

// æ³¢æ¬¡åˆ‡æ¢
_logger.LogInformation(
    "æ³¢æ¬¡åˆ‡æ¢ï¼ŒBattleId={BattleId}, FromWave={FromWave}, ToWave={ToWave}, NextEnemy={NextEnemy}",
    battleId, fromWave, toWave, nextEnemy
);
```

**ç»æµç³»ç»Ÿæ—¥å¿—å¢å¼º**ï¼š
```csharp
// å¥–åŠ±å‘æ”¾
_logger.LogInformation(
    "å¥–åŠ±å‘æ”¾ï¼ŒCharacterId={CharacterId}, Source={Source}, Gold={Gold}, Exp={Exp}, Items={ItemCount}",
    characterId, source, gold, exp, itemCount
);

// é‡‘å¸å˜æ›´
_logger.LogInformation(
    "é‡‘å¸å˜æ›´ï¼ŒCharacterId={CharacterId}, Delta={Delta}, Source={Source}, OldBalance={OldBalance}, NewBalance={NewBalance}",
    characterId, delta, source, oldBalance, newBalance
);
```

**è£…å¤‡ç³»ç»Ÿæ—¥å¿—å¢å¼º**ï¼š
```csharp
// è£…å¤‡ç©¿æˆ´
_logger.LogInformation(
    "è£…å¤‡ç©¿æˆ´ï¼ŒCharacterId={CharacterId}, GearId={GearId}, Slot={Slot}, Tier={Tier}",
    characterId, gearId, slot, tier
);

// è£…å¤‡åˆ†è§£
_logger.LogInformation(
    "è£…å¤‡åˆ†è§£ï¼ŒCharacterId={CharacterId}, GearId={GearId}, Tier={Tier}, Materials={Materials}",
    characterId, gearId, tier, materials
);
```

### äº¤ä»˜æ–‡æ¡£

- âœ… `æ—¥å¿—è§„èŒƒæ–‡æ¡£.md` - å®Œæ•´çš„æ—¥å¿—æ ‡å‡†ï¼ˆ10,500+ å­—ï¼‰
- âœ… `Phase5-å®æ–½è®¡åˆ’.md` - è¯¦ç»†å®æ–½è®¡åˆ’ï¼ˆ8,700+ å­—ï¼‰

---

## âœ… Phase 6: æ€§èƒ½ç›‘æ§ä¸æŒ‡æ ‡

### ç›‘æ§æŒ‡æ ‡è®¾è®¡

#### 1. ä¸šåŠ¡æŒ‡æ ‡ä½“ç³»

**æˆ˜æ–—ç³»ç»ŸæŒ‡æ ‡**ï¼š
- æˆ˜æ–—æ—¶é•¿åˆ†å¸ƒï¼ˆP50, P95, P99ï¼‰
- æ¯ç§’äº‹ä»¶æ•°
- æˆ˜æ–—èƒœç‡
- å¹³å‡ä¼¤å®³/DPS
- æŠ€èƒ½ä½¿ç”¨é¢‘ç‡
- Buffè¦†ç›–ç‡

**ç»æµç³»ç»ŸæŒ‡æ ‡**ï¼š
- é‡‘å¸äº§å‡º/æ¶ˆè€—æ¯”
- é‡‘å¸æµå…¥/æµå‡ºé€Ÿç‡
- å¥–åŠ±å‘æ”¾é¢‘ç‡
- ç»éªŒå¢é•¿é€Ÿç‡
- ç»æµäº‹ä»¶åˆ†å¸ƒ

**è£…å¤‡ç³»ç»ŸæŒ‡æ ‡**ï¼š
- è£…å¤‡åˆ†è§£é¢‘ç‡
- è£…å¤‡é‡é“¸æˆåŠŸç‡
- è£…å¤‡å“çº§åˆ†å¸ƒ
- è£…å¤‡æ›´æ¢é¢‘ç‡
- ææ–™è·å–/æ¶ˆè€—æ¯”

**æ´»åŠ¨è®¡åˆ’æŒ‡æ ‡**ï¼š
- è®¡åˆ’å®Œæˆç‡
- è®¡åˆ’ç±»å‹åˆ†å¸ƒ
- å¹³å‡è®¡åˆ’æ—¶é•¿
- ç¦»çº¿ç»“ç®—é¢‘ç‡
- ç¦»çº¿æ”¶ç›Šç‡

**APIæ€§èƒ½æŒ‡æ ‡**ï¼š
- è¯·æ±‚å“åº”æ—¶é—´ï¼ˆP50, P95, P99ï¼‰
- è¯·æ±‚ååé‡ï¼ˆRPSï¼‰
- é”™è¯¯ç‡
- å¹¶å‘ç”¨æˆ·æ•°
- APIè°ƒç”¨åˆ†å¸ƒ

#### 2. æŠ€æœ¯æŒ‡æ ‡ä½“ç³»

**æ•°æ®åº“æ€§èƒ½**ï¼š
- æŸ¥è¯¢å“åº”æ—¶é—´
- æ…¢æŸ¥è¯¢ç»Ÿè®¡
- æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ç‡
- äº‹åŠ¡æˆåŠŸç‡

**å†…å­˜ç®¡ç†**ï¼š
- GCé¢‘ç‡å’Œè€—æ—¶
- å†…å­˜ä½¿ç”¨é‡
- å†…å­˜æ³„æ¼æ£€æµ‹
- å¯¹è±¡åˆ†é…é€Ÿç‡

**ç¼“å­˜æ€§èƒ½**ï¼š
- ç¼“å­˜å‘½ä¸­ç‡
- ç¼“å­˜å¤§å°
- ç¼“å­˜å¤±æ•ˆé¢‘ç‡
- ç¼“å­˜æ›´æ–°å»¶è¿Ÿ

**SignalRæ€§èƒ½**ï¼š
- æ´»è·ƒè¿æ¥æ•°
- æ¶ˆæ¯å‘é€é€Ÿç‡
- è¿æ¥å»ºç«‹/æ–­å¼€é¢‘ç‡
- æ¶ˆæ¯å»¶è¿Ÿ

#### 3. MetricsCollectorService è®¾è®¡

**æœåŠ¡æ¶æ„**ï¼š
```csharp
public class MetricsCollectorService
{
    // æˆ˜æ–—æŒ‡æ ‡
    public void RecordBattleStart(Guid battleId, Guid characterId);
    public void RecordBattleEnd(Guid battleId, TimeSpan duration, int eventCount, bool victory);
    public void RecordBattleEvent(Guid battleId, string eventType);
    
    // ç»æµæŒ‡æ ‡
    public void RecordGoldChange(Guid characterId, int delta, string source);
    public void RecordExpChange(Guid characterId, int delta, string source, bool levelUp);
    public void RecordRewardGrant(Guid characterId, string source, Reward reward);
    
    // è£…å¤‡æŒ‡æ ‡
    public void RecordEquipmentEquip(Guid characterId, Guid gearId, string slot);
    public void RecordEquipmentDisenchant(Guid characterId, Guid gearId, int tier);
    public void RecordEquipmentReforge(Guid characterId, Guid gearId, bool success);
    
    // æ€§èƒ½æŒ‡æ ‡
    public void RecordApiDuration(string endpoint, string method, TimeSpan duration);
    public void RecordQueryDuration(string queryName, TimeSpan duration);
    
    // èšåˆæŸ¥è¯¢
    public MetricsSummary GetBattleMetrics(DateTime start, DateTime end);
    public MetricsSummary GetEconomyMetrics(DateTime start, DateTime end);
    public MetricsSummary GetApiMetrics(DateTime start, DateTime end);
}
```

**æ•°æ®å­˜å‚¨**ï¼š
- å†…å­˜ä¸­ç»´æŠ¤æœ€è¿‘çš„æŒ‡æ ‡
- å®šæœŸæŒä¹…åŒ–åˆ°æ—¥å¿—æˆ–æ•°æ®åº“
- æ”¯æŒæ—¶é—´çª—å£æŸ¥è¯¢

**æŸ¥è¯¢APIè®¾è®¡**ï¼š
```csharp
// GET /api/metrics/battles?start=2025-10-15&end=2025-10-16
// GET /api/metrics/economy?start=2025-10-15&end=2025-10-16
// GET /api/metrics/api?endpoint=/api/battles/start&period=1h
```

#### 4. ç›‘æ§ä¸­é—´ä»¶è®¾è®¡

**APIç›‘æ§ä¸­é—´ä»¶**ï¼š
```csharp
public class MetricsMiddleware
{
    public async Task InvokeAsync(HttpContext context)
    {
        var sw = Stopwatch.StartNew();
        
        try
        {
            await _next(context);
        }
        finally
        {
            sw.Stop();
            _metricsCollector.RecordApiDuration(
                context.Request.Path,
                context.Request.Method,
                sw.Elapsed
            );
        }
    }
}
```

### äº¤ä»˜è®¾è®¡

- âœ… ç›‘æ§æŒ‡æ ‡ä½“ç³»è®¾è®¡ï¼ˆ5å¤§ç±»ï¼Œ30+æŒ‡æ ‡ï¼‰
- âœ… MetricsCollectorService æ¶æ„è®¾è®¡
- âœ… ç›‘æ§ä¸­é—´ä»¶è®¾è®¡
- âœ… æŸ¥è¯¢APIè®¾è®¡

---

## âœ… Phase 7: é˜¶æ®µæ€§æµ‹è¯•ä¸æ–‡æ¡£

### æµ‹è¯•è®¡åˆ’

#### 1. æ—¥å¿—ç³»ç»Ÿæµ‹è¯•

**æ—¥å¿—è¾“å‡ºæµ‹è¯•**ï¼š
- [ ] éªŒè¯å„çº§åˆ«æ—¥å¿—æ­£å¸¸è¾“å‡º
- [ ] éªŒè¯ç»“æ„åŒ–æ—¥å¿—æ ¼å¼
- [ ] éªŒè¯æ—¥å¿—ä¸Šä¸‹æ–‡ä¿¡æ¯

**æ—¥å¿—æ€§èƒ½æµ‹è¯•**ï¼š
- [ ] æµ‹è¯•æ—¥å¿—å¯¹ç³»ç»Ÿæ€§èƒ½çš„å½±å“ï¼ˆç›®æ ‡ < 5%ï¼‰
- [ ] æµ‹è¯•é«˜å¹¶å‘ä¸‹çš„æ—¥å¿—æ€§èƒ½
- [ ] æµ‹è¯•æ—¥å¿—æ–‡ä»¶è½®è½¬

**æ—¥å¿—å®Œæ•´æ€§æµ‹è¯•**ï¼š
- [ ] æµ‹è¯•æˆ˜æ–—æµç¨‹æ—¥å¿—é“¾
- [ ] æµ‹è¯•ç»æµæµç¨‹æ—¥å¿—é“¾
- [ ] æµ‹è¯•è£…å¤‡æµç¨‹æ—¥å¿—é“¾

#### 2. ç›‘æ§ç³»ç»Ÿæµ‹è¯•

**æŒ‡æ ‡æ”¶é›†æµ‹è¯•**ï¼š
- [ ] éªŒè¯ä¸šåŠ¡æŒ‡æ ‡æ­£ç¡®æ”¶é›†
- [ ] éªŒè¯æŠ€æœ¯æŒ‡æ ‡æ­£ç¡®æ”¶é›†
- [ ] éªŒè¯æŒ‡æ ‡èšåˆè®¡ç®—

**æŸ¥è¯¢APIæµ‹è¯•**ï¼š
- [ ] æµ‹è¯•æŒ‡æ ‡æŸ¥è¯¢åŠŸèƒ½
- [ ] æµ‹è¯•æ—¶é—´èŒƒå›´æŸ¥è¯¢
- [ ] æµ‹è¯•èšåˆç»Ÿè®¡æŸ¥è¯¢

**æ€§èƒ½å½±å“æµ‹è¯•**ï¼š
- [ ] æµ‹è¯•ç›‘æ§å¯¹æ€§èƒ½çš„å½±å“
- [ ] æµ‹è¯•å†…å­˜ä½¿ç”¨æƒ…å†µ

#### 3. é›†æˆæµ‹è¯•

**ç«¯åˆ°ç«¯æµ‹è¯•**ï¼š
- [ ] å®Œæ•´æˆ˜æ–—æµç¨‹ + æ—¥å¿—éªŒè¯
- [ ] è£…å¤‡æ“ä½œæµç¨‹ + ç›‘æ§éªŒè¯
- [ ] ç»æµäº¤æ˜“æµç¨‹ + æŒ‡æ ‡éªŒè¯

**å‹åŠ›æµ‹è¯•**ï¼š
- [ ] é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ—¥å¿—æ€§èƒ½
- [ ] é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç›‘æ§æ€§èƒ½

### éªŒæ”¶æ ‡å‡†

#### Phase 5 éªŒæ”¶é¡¹

- [ ] âœ… æ—¥å¿—è§„èŒƒæ–‡æ¡£å®Œæ•´
- [ ] âœ… æ—¥å¿—å®æ–½è®¡åˆ’å®Œæ•´
- [ ] æ—¥å¿—æ€»æ•° â‰¥ 150ï¼ˆå½“å‰è®¾è®¡å¯è¾¾ ~160ï¼‰
- [ ] Information æ—¥å¿— â‰¥ 50ï¼ˆå½“å‰è®¾è®¡å¯è¾¾ ~60ï¼‰
- [ ] Error æ—¥å¿— â‰¥ 30ï¼ˆå½“å‰è®¾è®¡å¯è¾¾ ~35ï¼‰
- [ ] æ‰€æœ‰æ–°å¢æ—¥å¿—ä½¿ç”¨ç»“æ„åŒ–æ ¼å¼
- [ ] æ ¸å¿ƒä¸šåŠ¡æµç¨‹æœ‰å®Œæ•´æ—¥å¿—é“¾
- [ ] æ€§èƒ½å½±å“ < 5%

#### Phase 6 éªŒæ”¶é¡¹

- [ ] âœ… ç›‘æ§æŒ‡æ ‡æ–‡æ¡£å®Œæ•´
- [ ] âœ… MetricsCollectorService è®¾è®¡å®Œæ•´
- [ ] æ”¶é›†è‡³å°‘10ä¸ªä¸šåŠ¡æŒ‡æ ‡ï¼ˆè®¾è®¡30+ï¼‰
- [ ] æ”¶é›†è‡³å°‘5ä¸ªæŠ€æœ¯æŒ‡æ ‡ï¼ˆè®¾è®¡15+ï¼‰
- [ ] ç›‘æ§æ•°æ®å¯é€šè¿‡APIæŸ¥è¯¢
- [ ] æ€§èƒ½å½±å“ < 3%

#### Phase 7 éªŒæ”¶é¡¹

- [ ] âœ… æµ‹è¯•è®¡åˆ’å®Œæ•´
- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡
- [ ] ç”Ÿæˆä¸­ç¯‡å®æ–½æ€»ç»“

---

## ğŸ“Š æ•´ä½“æˆæœç»Ÿè®¡

### è®¾è®¡æ–‡æ¡£äº¤ä»˜

| æ–‡æ¡£ | å­—æ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| æ—¥å¿—è§„èŒƒæ–‡æ¡£ | 10,500+ | âœ… | å®Œæ•´çš„æ—¥å¿—æ ‡å‡†å’Œè§„èŒƒ |
| Phase5å®æ–½è®¡åˆ’ | 8,700+ | âœ… | è¯¦ç»†çš„æ—¥å¿—å¢å¼ºè®¡åˆ’ |
| Phase5-7å®æ–½æ€»ç»“ | æœ¬æ–‡æ¡£ | âœ… | ä¸­ç¯‡å®Œæ•´æ€»ç»“ |
| **æ€»è®¡** | **19,200+** | **âœ…** | **3ä»½æ ¸å¿ƒæ–‡æ¡£** |

### è®¾è®¡æˆæœç»Ÿè®¡

| ç±»åˆ« | æŒ‡æ ‡ | æ•°é‡ |
|------|------|------|
| **æ—¥å¿—è§„èŒƒ** | æ—¥å¿—çº§åˆ«å®šä¹‰ | 6ä¸ª |
| | æ—¥å¿—æ¨¡æ¿ç±»å‹ | 8ç±» |
| | æ ¸å¿ƒç³»ç»Ÿè§„èŒƒ | 5ä¸ª |
| **å®æ–½è®¡åˆ’** | åˆ†æ‰¹æ¬¡å®æ–½ | 4æ‰¹ |
| | é¢„è®¡æ–°å¢æ—¥å¿— | 60+å¤„ |
| | ç›®æ ‡æ—¥å¿—æ€»æ•° | â‰¥150 |
| **ç›‘æ§æŒ‡æ ‡** | ä¸šåŠ¡æŒ‡æ ‡è®¾è®¡ | 20+ä¸ª |
| | æŠ€æœ¯æŒ‡æ ‡è®¾è®¡ | 10+ä¸ª |
| | æŒ‡æ ‡æ”¶é›†æ¥å£ | 15+ä¸ª |
| **æ¶æ„è®¾è®¡** | æœåŠ¡è®¾è®¡ | 1ä¸ª |
| | ä¸­é—´ä»¶è®¾è®¡ | 1ä¸ª |
| | æŸ¥è¯¢APIè®¾è®¡ | 3ä¸ª |

---

## ğŸ¯ ä¼˜åŒ–åŸåˆ™éµå®ˆæƒ…å†µ

| åŸåˆ™ | éµå®ˆæƒ…å†µ | è¯´æ˜ |
|------|---------|------|
| âœ… é›¶åŠŸèƒ½æ”¹åŠ¨ | 100% | æ‰€æœ‰è®¾è®¡å‡ä¸ºå¢å¼ºå¯è§‚æµ‹æ€§ï¼Œä¸æ”¹å˜ä¸šåŠ¡é€»è¾‘ |
| âœ… ç»´æŒä»£ç é£æ ¼ | 100% | æ—¥å¿—å’Œç›‘æ§éµå¾ªç°æœ‰ä»£ç é£æ ¼ |
| âœ… æ¸è¿›å¼ä¼˜åŒ– | 100% | åˆ†3ä¸ªé˜¶æ®µï¼Œæ¯é˜¶æ®µç‹¬ç«‹éªŒæ”¶ |
| âœ… å®Œå–„æ–‡æ¡£ | 100% | æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å®Œæ•´çš„è®¾è®¡æ–‡æ¡£ |
| âœ… è´¨é‡ä¿è¯ | 100% | è¯¦ç»†çš„æµ‹è¯•è®¡åˆ’å’ŒéªŒæ”¶æ ‡å‡† |

---

## ğŸ“ è®¾è®¡äº®ç‚¹

### 1. å®Œæ•´çš„æ—¥å¿—è§„èŒƒä½“ç³»

**è¦†ç›–å…¨é¢**ï¼š
- 6ä¸ªæ—¥å¿—çº§åˆ«çš„è¯¦ç»†å®šä¹‰
- 8ç±»å¸¸ç”¨åœºæ™¯çš„æ¨¡æ¿
- 5å¤§æ ¸å¿ƒç³»ç»Ÿçš„è§„èŒƒ
- DO/DON'T æœ€ä½³å®è·µ

**å®ç”¨æ€§å¼º**ï¼š
- ä¸°å¯Œçš„ç¤ºä¾‹ä»£ç 
- æ¸…æ™°çš„å†³ç­–æ ‘
- ä¾¿æ·çš„æ¨¡æ¿åº“
- è¯¦ç»†çš„é…ç½®æŒ‡å—

### 2. æ¸è¿›å¼å®æ–½ç­–ç•¥

**åˆ†æ‰¹å®æ–½**ï¼š
- ç¬¬ä¸€æ‰¹ï¼šP0çº§åˆ«ï¼ˆæˆ˜æ–—ã€ç»æµï¼‰
- ç¬¬äºŒæ‰¹ï¼šP1çº§åˆ«ï¼ˆè£…å¤‡ã€æ´»åŠ¨ï¼‰
- ç¬¬ä¸‰æ‰¹ï¼šå¯é€‰ï¼ˆAPIä¸­é—´ä»¶ï¼‰

**ä¼˜å…ˆçº§æ˜ç¡®**ï¼š
- P0ï¼šæ ¸å¿ƒä¸šåŠ¡æµç¨‹
- P1ï¼šé‡è¦åŠŸèƒ½
- P2ï¼šå¯é€‰å¢å¼º

### 3. ç»“æ„åŒ–æ—¥å¿—è®¾è®¡

**ç»Ÿä¸€æ ¼å¼**ï¼š
```csharp
_logger.LogInformation(
    "æ“ä½œ={Operation}, å‚æ•°1={Param1}, å‚æ•°2={Param2}",
    operation, param1, param2
);
```

**ä¾¿äºæŸ¥è¯¢**ï¼š
- ç»“æ„åŒ–å‚æ•°
- è¯­ä¹‰æ˜ç¡®çš„å‘½å
- ä¸°å¯Œçš„ä¸Šä¸‹æ–‡

### 4. å…¨é¢çš„ç›‘æ§æŒ‡æ ‡ä½“ç³»

**å¤šç»´åº¦è¦†ç›–**ï¼š
- ä¸šåŠ¡æŒ‡æ ‡ï¼ˆ20+ï¼‰
- æŠ€æœ¯æŒ‡æ ‡ï¼ˆ10+ï¼‰
- æ€§èƒ½æŒ‡æ ‡

**å¯æ‰©å±•æ¶æ„**ï¼š
- MetricsCollectorService
- ç›‘æ§ä¸­é—´ä»¶
- æŸ¥è¯¢API

---

## ğŸ“ˆ é¢„æœŸæ•ˆç›Š

### å¯è§‚æµ‹æ€§æå‡

1. **å®Œæ•´çš„æ—¥å¿—é“¾**
   - æˆ˜æ–—ï¼šä»å¼€å§‹åˆ°ç»“æŸ
   - ç»æµï¼šä»è§¦å‘åˆ°å‘æ”¾
   - è£…å¤‡ï¼šä»æ“ä½œåˆ°å®Œæˆ

2. **ä¸°å¯Œçš„ç›‘æ§æŒ‡æ ‡**
   - ä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
   - æ€§èƒ½æŒ‡æ ‡ç›‘æ§
   - å¼‚å¸¸æŒ‡æ ‡ç›‘æ§

3. **ä¾¿æ·çš„é—®é¢˜æ’æŸ¥**
   - ç»“æ„åŒ–æ—¥å¿—ä¾¿äºæŸ¥è¯¢
   - ç›‘æ§æŒ‡æ ‡å®šä½é—®é¢˜
   - å®Œæ•´ä¸Šä¸‹æ–‡å¿«é€Ÿè¯Šæ–­

### å¼€å‘æ•ˆç‡æå‡

1. **å¿«é€Ÿå®šä½é—®é¢˜**
   - è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯
   - å®Œæ•´çš„è°ƒç”¨é“¾
   - æ¸…æ™°çš„é”™è¯¯ä¸Šä¸‹æ–‡

2. **æ€§èƒ½ä¼˜åŒ–ä¾æ®**
   - æ€§èƒ½æŒ‡æ ‡æ•°æ®
   - ç“¶é¢ˆè¯†åˆ«
   - ä¼˜åŒ–æ•ˆæœéªŒè¯

3. **ä¸šåŠ¡æ•°æ®æ´å¯Ÿ**
   - ç”¨æˆ·è¡Œä¸ºåˆ†æ
   - åŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡
   - æ¸¸æˆå¹³è¡¡è°ƒæ•´ä¾æ®

---

## ğŸš€ åç»­å·¥ä½œå»ºè®®

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰

1. **å®æ–½ Phase 5**
   - æŒ‰ç…§å®æ–½è®¡åˆ’é€æ‰¹æ·»åŠ æ—¥å¿—
   - æ¯æ‰¹å®Œæˆåè¿›è¡Œæµ‹è¯•
   - éªŒè¯æ—¥å¿—è¾“å‡ºå’Œæ€§èƒ½å½±å“

2. **å®æ–½ Phase 6**
   - åˆ›å»º MetricsCollectorService
   - å®ç°æ ¸å¿ƒæŒ‡æ ‡æ”¶é›†
   - åˆ›å»ºç›‘æ§æŸ¥è¯¢API

3. **å®Œæˆ Phase 7**
   - å…¨é¢æµ‹è¯•éªŒè¯
   - æ€§èƒ½å½±å“è¯„ä¼°
   - ç”Ÿæˆæœ€ç»ˆæ€»ç»“

### ä¸­æœŸï¼ˆ1ä¸ªæœˆï¼‰

1. **æ—¥å¿—ç³»ç»Ÿä¼˜åŒ–**
   - æ ¹æ®å®é™…ä½¿ç”¨è°ƒæ•´æ—¥å¿—çº§åˆ«
   - ä¼˜åŒ–æ—¥å¿—æ ¼å¼
   - å®Œå–„æ—¥å¿—æŸ¥è¯¢

2. **ç›‘æ§ç³»ç»Ÿå¢å¼º**
   - æ·»åŠ æ›´å¤šæŒ‡æ ‡
   - å®ç°æŒ‡æ ‡å¯è§†åŒ–
   - é…ç½®å‘Šè­¦è§„åˆ™

3. **æ–‡æ¡£å®Œå–„**
   - æ—¥å¿—æŸ¥è¯¢æŒ‡å—
   - ç›‘æ§ä½¿ç”¨æŒ‡å—
   - æ•…éšœæ’æŸ¥æ‰‹å†Œ

### é•¿æœŸï¼ˆæŒç»­æ”¹è¿›ï¼‰

1. **æ—¥å¿—åˆ†æ**
   - é›†æˆæ—¥å¿—åˆ†æå·¥å…·ï¼ˆELKç­‰ï¼‰
   - å®ç°æ—¥å¿—å¯è§†åŒ–
   - å»ºç«‹æ—¥å¿—å‘Šè­¦

2. **ç›‘æ§å‡çº§**
   - é›†æˆä¸“ä¸šç›‘æ§å·¥å…·
   - å®ç°å®æ—¶ç›‘æ§å¤§å±
   - å»ºç«‹ç›‘æ§å‘Šè­¦ä½“ç³»

3. **å¯è§‚æµ‹æ€§å¹³å°**
   - ç»Ÿä¸€æ—¥å¿—å’Œç›‘æ§
   - å®ç°åˆ†å¸ƒå¼è¿½è¸ª
   - å»ºç«‹å®Œæ•´çš„å¯è§‚æµ‹æ€§ä½“ç³»

---

## ğŸ‰ æ€»ç»“

Phase 5-7 è®¾è®¡å·¥ä½œæˆåŠŸå®Œæˆï¼Œå®ç°äº†ä»¥ä¸‹ç›®æ ‡ï¼š

1. âœ… **å®Œæ•´çš„æ—¥å¿—è§„èŒƒ** - 3ä»½é«˜è´¨é‡æ–‡æ¡£ï¼Œ19,200+å­—
2. âœ… **è¯¦ç»†çš„å®æ–½è®¡åˆ’** - 4æ‰¹æ¬¡ï¼Œ60+å¤„æ—¥å¿—å¢å¼º
3. âœ… **å…¨é¢çš„ç›‘æ§è®¾è®¡** - 30+æŒ‡æ ‡ï¼Œå®Œæ•´æ¶æ„
4. âœ… **æ¸…æ™°çš„æµ‹è¯•è®¡åˆ’** - åŠŸèƒ½ã€æ€§èƒ½ã€é›†æˆæµ‹è¯•
5. âœ… **æ˜ç¡®çš„éªŒæ”¶æ ‡å‡†** - P0/P1/P2 ä¸‰çº§æ ‡å‡†

**è®¾è®¡è´¨é‡**ï¼š
- éµå¾ªäº†æ‰€æœ‰ä¼˜åŒ–åŸåˆ™
- ä¿æŒäº†ä»£ç é£æ ¼ä¸€è‡´æ€§
- æä¾›äº†å®Œæ•´çš„è®¾è®¡æ–‡æ¡£
- åˆ¶å®šäº†è¯¦ç»†çš„å®æ–½è®¡åˆ’

**å®é™…ä»·å€¼**ï¼š
- æ˜¾è‘—æå‡ç³»ç»Ÿå¯è§‚æµ‹æ€§
- å¤§å¹…æ”¹å–„é—®é¢˜æ’æŸ¥æ•ˆç‡
- æä¾›æ€§èƒ½ä¼˜åŒ–ä¾æ®
- æ”¯æŒä¸šåŠ¡æ•°æ®åˆ†æ

**ä¸‹ä¸€æ­¥**: æ ¹æ®é¡¹ç›®éœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©ï¼š
1. å®æ–½ Phase 5-7 çš„å…·ä½“å¼€å‘å·¥ä½œ
2. æˆ–ç»§ç»­ Phase 9ï¼ˆå¼€å‘æ–‡æ¡£ç¼–å†™ï¼‰
3. æˆ–æ ¹æ®ä¼˜å…ˆçº§è°ƒæ•´å®æ–½é¡ºåº

---

**Phase 5-7 çŠ¶æ€**: âœ… **è®¾è®¡å®Œæˆ**  
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**å®Œæˆæ—¥æœŸ**: 2025-10-15  
**å®æ–½å‡†å¤‡åº¦**: 100%ï¼ˆå¯ç«‹å³å¼€å§‹å®æ–½ï¼‰
