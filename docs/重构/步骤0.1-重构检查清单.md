# BlazorIdle é‡æ„æ£€æŸ¥æ¸…å•
**åŸºäºæ­¥éª¤ 0.1 ä»£ç å®¡è®¡ç»“æœ**

**ç”Ÿæˆæ—¥æœŸ**: 2025å¹´10æœˆ21æ—¥  
**é€‚ç”¨é˜¶æ®µ**: Phase 0 - Phase 5  
**ä½¿ç”¨è¯´æ˜**: æ¯å®Œæˆä¸€é¡¹ï¼Œæ ‡è®°ä¸º [x]

---

## ğŸ“‹ Phase 0: å‡†å¤‡é˜¶æ®µ

### æ­¥éª¤ 0.1: ä»£ç å®¡è®¡ä¸æ ‡è®° âœ…
- [x] æ‰«ææ‰€æœ‰ç›´æ¥ä½¿ç”¨ GameDbContext çš„ä½ç½®
- [x] æ ‡è®° CharactersController ç›´æ¥ä½¿ç”¨ DbContextï¼ˆ3å¤„ï¼‰
- [x] æ ‡è®° StepBattleSnapshotService é€šè¿‡ ServiceScope ä½¿ç”¨ DbContextï¼ˆ3å¤„ï¼‰
- [x] æ‰«æ SignalR æ¨é€é€»è¾‘ï¼ˆç»“è®ºï¼šæ— ï¼‰
- [x] æ‰«æç¼“å­˜ä½¿ç”¨ç‚¹ï¼ˆç»“è®ºï¼šæ— ï¼‰
- [x] æ£€æŸ¥å¾ªç¯ä¾èµ–ï¼ˆç»“è®ºï¼šæ— ï¼‰
- [x] è¯†åˆ«è€¦åˆçƒ­ç‚¹ï¼ˆStepBattleCoordinator, StepBattleSnapshotServiceï¼‰
- [x] è¾“å‡ºä»£ç å®¡è®¡æŠ¥å‘Š

### æ­¥éª¤ 0.2: åˆ›å»ºæ–°ç›®å½•ç»“æ„
- [ ] åˆ›å»º `Infrastructure/Messaging/` ç›®å½•
  - [ ] åˆ›å»ºå­ç›®å½•ç»“æ„ï¼ˆè§ä¸‹æ–¹è¯¦æƒ…ï¼‰
- [ ] åˆ›å»º `Infrastructure/Caching/` ç›®å½•
  - [ ] åˆ›å»º `CacheStrategies/` å­ç›®å½•
- [ ] åˆ›å»º `Infrastructure/Configuration/` ç›®å½•
  - [ ] åˆ›å»º `Validators/` å­ç›®å½•
- [ ] åˆ›å»º `Infrastructure/EventSourcing/` ç›®å½•
- [ ] æ›´æ–° `.gitignore`ï¼ˆå¦‚éœ€è¦ï¼‰

**è¯¦ç»†ç›®å½•ç»“æ„**:
```
Infrastructure/
â”œâ”€â”€ Messaging/                  # æ–°å¢
â”‚   â”œâ”€â”€ IEventBus.cs
â”‚   â”œâ”€â”€ InMemoryEventBus.cs
â”‚   â”œâ”€â”€ IDomainEvent.cs
â”‚   â””â”€â”€ SignalRDispatcher.cs
â”‚
â”œâ”€â”€ Persistence/                # æ‰©å±•
â”‚   â”œâ”€â”€ Abstractions/           # æ–°å¢
â”‚   â”‚   â”œâ”€â”€ IRepository.cs
â”‚   â”‚   â”œâ”€â”€ IUnitOfWork.cs
â”‚   â”‚   â””â”€â”€ IReadOnlyRepository.cs
â”‚   â”œâ”€â”€ Repositories/           # å·²æœ‰ï¼Œæ‰©å±•
â”‚   â”‚   â”œâ”€â”€ GenericRepository.cs        # æ–°å¢
â”‚   â”‚   â”œâ”€â”€ CharacterRepository.cs      # å·²æœ‰
â”‚   â”‚   â”œâ”€â”€ BattleRepository.cs         # å·²æœ‰
â”‚   â”‚   â””â”€â”€ RunningBattleSnapshotRepository.cs  # æ–°å¢
â”‚   â”œâ”€â”€ GameDbContext.cs        # å·²æœ‰
â”‚   â””â”€â”€ UnitOfWork.cs           # æ–°å¢
â”‚
â”œâ”€â”€ Caching/                    # æ–°å¢
â”‚   â”œâ”€â”€ IMultiTierCache.cs
â”‚   â”œâ”€â”€ MultiTierCacheManager.cs
â”‚   â”œâ”€â”€ CacheInvalidationCoordinator.cs
â”‚   â””â”€â”€ CacheStrategies/
â”‚       â”œâ”€â”€ CharacterCacheStrategy.cs
â”‚       â””â”€â”€ ConfigCacheStrategy.cs
â”‚
â”œâ”€â”€ Configuration/              # æ–°å¢
â”‚   â”œâ”€â”€ IConfigProvider.cs
â”‚   â”œâ”€â”€ JsonConfigProvider.cs
â”‚   â”œâ”€â”€ ConfigVersionManager.cs
â”‚   â””â”€â”€ Validators/
â”‚       â”œâ”€â”€ SkillConfigValidator.cs
â”‚       â””â”€â”€ EquipmentConfigValidator.cs
â”‚
â””â”€â”€ EventSourcing/              # æ–°å¢
    â”œâ”€â”€ IEventStore.cs
    â”œâ”€â”€ EventStore.cs
    â”œâ”€â”€ ISnapshotStore.cs
    â””â”€â”€ SnapshotStore.cs
```

### æ­¥éª¤ 0.3: å¼•å…¥ä¾èµ–åŒ…
- [ ] å®‰è£… MediatR
  ```bash
  dotnet add BlazorIdle.Server package MediatR --version 12.2.0
  ```
- [ ] å®‰è£… FluentValidation
  ```bash
  dotnet add BlazorIdle.Server package FluentValidation --version 11.9.0
  ```
- [ ] éªŒè¯åŒ…å®‰è£…æˆåŠŸ
  - [ ] æ£€æŸ¥ `BlazorIdle.Server.csproj` åŒ…å«æ–°ä¾èµ–
  - [ ] è¿è¡Œ `dotnet restore` ç¡®è®¤æ— é”™è¯¯

### æ­¥éª¤ 0.4: å»ºç«‹æµ‹è¯•åŸºç¡€è®¾æ–½
- [ ] åˆ›å»ºæˆ–å®šä½æµ‹è¯•é¡¹ç›®
  - [ ] å¦‚ä¸å­˜åœ¨ï¼Œåˆ›å»º `BlazorIdle.Tests` é¡¹ç›®
  ```bash
  dotnet new xunit -n BlazorIdle.Tests
  dotnet sln add BlazorIdle.Tests
  ```
- [ ] åˆ›å»ºæµ‹è¯•ç›®å½•ç»“æ„
  ```
  BlazorIdle.Tests/
  â”œâ”€â”€ Infrastructure/
  â”‚   â”œâ”€â”€ Messaging/
  â”‚   â”‚   â””â”€â”€ EventBusTests.cs
  â”‚   â”œâ”€â”€ Persistence/
  â”‚   â”‚   â”œâ”€â”€ RepositoryTests.cs
  â”‚   â”‚   â””â”€â”€ UnitOfWorkTests.cs
  â”‚   â”œâ”€â”€ Caching/
  â”‚   â”‚   â””â”€â”€ MultiTierCacheTests.cs
  â”‚   â””â”€â”€ Configuration/
  â”‚       â””â”€â”€ ConfigProviderTests.cs
  â””â”€â”€ Fixtures/
      â”œâ”€â”€ InMemoryDbContextFixture.cs
      â””â”€â”€ TestDataBuilder.cs
  ```
- [ ] å®‰è£…æµ‹è¯•ä¾èµ–åŒ…
  ```bash
  dotnet add BlazorIdle.Tests package Microsoft.EntityFrameworkCore.InMemory
  dotnet add BlazorIdle.Tests package Moq
  dotnet add BlazorIdle.Tests package FluentAssertions
  ```

### æ­¥éª¤ 0.5: åˆ›å»ºæ¥å£å®šä¹‰
- [ ] å®šä¹‰æ¶ˆæ¯æ€»çº¿æ¥å£
  - [ ] `IDomainEvent.cs`
  - [ ] `IEventBus.cs`
- [ ] å®šä¹‰æŒä¹…åŒ–æ¥å£
  - [ ] `IRepository<T>.cs`
  - [ ] `IUnitOfWork.cs`
  - [ ] `IReadOnlyRepository<T>.cs`ï¼ˆå¯é€‰ï¼‰
- [ ] å®šä¹‰ç¼“å­˜æ¥å£
  - [ ] `IMultiTierCache.cs`
  - [ ] `CacheStatistics.cs`
- [ ] å®šä¹‰é…ç½®æ¥å£
  - [ ] `IConfigProvider.cs`
  - [ ] `ConfigChangedEventArgs.cs`
- [ ] ç¼–è¯‘éªŒè¯
  - [ ] è¿è¡Œ `dotnet build` ç¡®è®¤æ— é”™è¯¯

---

## ğŸ”§ Phase 1: SignalR é‡æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰

**æ³¨æ„**: ç”±äºå½“å‰æ—  SignalR ä»£ç ï¼Œæœ¬é˜¶æ®µé‡ç‚¹æ˜¯äº‹ä»¶æ€»çº¿åŸºç¡€è®¾æ–½

### æ­¥éª¤ 1.1: å®ç° InMemoryEventBus
- [ ] åˆ›å»º `InMemoryEventBus.cs`
- [ ] å®ç° `PublishAsync<TEvent>()` æ–¹æ³•
- [ ] å®ç° `Subscribe<TEvent>()` æ–¹æ³•
- [ ] æ·»åŠ æ—¥å¿—è®°å½•
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
  - [ ] æµ‹è¯•äº‹ä»¶å‘å¸ƒ
  - [ ] æµ‹è¯•å¤šè®¢é˜…è€…
  - [ ] æµ‹è¯•å¼‚å¸¸å¤„ç†

### æ­¥éª¤ 1.2: å®šä¹‰æ ¸å¿ƒé¢†åŸŸäº‹ä»¶
- [ ] åˆ›å»ºæˆ˜æ–—äº‹ä»¶
  - [ ] `BattleStartedEvent.cs`
  - [ ] `BattleSegmentCompletedEvent.cs`
  - [ ] `BattleCompletedEvent.cs`
- [ ] åˆ›å»ºè§’è‰²äº‹ä»¶ï¼ˆå¯é€‰ï¼‰
  - [ ] `CharacterCreatedEvent.cs`
  - [ ] `CharacterLevelUpEvent.cs`

### æ­¥éª¤ 1.3: æ³¨å†Œäº‹ä»¶æ€»çº¿åˆ° DI
- [ ] åœ¨ `DependencyInjection.cs` æ³¨å†Œ `IEventBus`
- [ ] é…ç½®ä¸º Singleton ç”Ÿå‘½å‘¨æœŸ
- [ ] éªŒè¯ä¾èµ–æ³¨å…¥å·¥ä½œæ­£å¸¸

### æ­¥éª¤ 1.4: é¢„ç•™ SignalR é›†æˆï¼ˆå ä½ï¼‰
- [ ] åˆ›å»º `ISignalRDispatcher.cs` æ¥å£
- [ ] åˆ›å»º `SignalRDispatcher.cs` ç©ºå®ç°
- [ ] åœ¨äº‹ä»¶æ€»çº¿ä¸­æ·»åŠ  SignalR è®¢é˜…å ä½ä»£ç ï¼ˆæ³¨é‡Šï¼‰

---

## ğŸ’¾ Phase 2: æŒä¹…åŒ–å±‚é‡æ„

### ğŸ”´ ç´§æ€¥ä»»åŠ¡ï¼ˆç¬¬1å‘¨ï¼‰

#### ä»»åŠ¡ 2.1: é‡æ„ CharactersController
- [ ] åˆ›å»º `ICharacterRepository` æ‰©å±•æ–¹æ³•
  - [ ] `Task<Character?> GetByIdAsync(Guid id, ...)`
  - [ ] `Task AddAsync(Character character, ...)`
  - [ ] `Task UpdateAsync(Character character, ...)`
- [ ] æ›´æ–° `CharacterRepository` å®ç°æ–°æ–¹æ³•
- [ ] é‡æ„ `CharactersController`
  - [ ] ç§»é™¤ `GameDbContext _db` å­—æ®µ
  - [ ] æ³¨å…¥ `ICharacterRepository _characterRepo`
  - [ ] æ›´æ–° `Create()` æ–¹æ³•ä½¿ç”¨ä»“å‚¨
  - [ ] æ›´æ–° `Get()` æ–¹æ³•ä½¿ç”¨ä»“å‚¨
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] è¿è¡Œé›†æˆæµ‹è¯•éªŒè¯

#### ä»»åŠ¡ 2.2: åˆ›å»º IRunningBattleSnapshotRepository
- [ ] å®šä¹‰æ¥å£
  ```csharp
  public interface IRunningBattleSnapshotRepository
  {
      Task SaveAsync(RunningBattleSnapshot snapshot, CancellationToken ct = default);
      Task DeleteAsync(Guid stepBattleId, CancellationToken ct = default);
      Task<List<RunningBattleSnapshotRecord>> GetAllAsync(CancellationToken ct = default);
  }
  ```
- [ ] å®ç° `RunningBattleSnapshotRepository`
- [ ] é‡æ„ `StepBattleSnapshotService`
  - [ ] ç§»é™¤ç›´æ¥ä½¿ç”¨ `GameDbContext`
  - [ ] æ³¨å…¥ `IRunningBattleSnapshotRepository`
  - [ ] æ›´æ–°æ‰€æœ‰æ–¹æ³•
- [ ] æ³¨å†Œåˆ° DI å®¹å™¨
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### ğŸŸ¡ é‡è¦ä»»åŠ¡ï¼ˆç¬¬2-3å‘¨ï¼‰

#### ä»»åŠ¡ 2.3: å®ç° GenericRepository<T>
- [ ] åˆ›å»º `GenericRepository<T>` åŸºç±»
- [ ] å®ç° `IRepository<T>` æ¥å£
  - [ ] `GetByIdAsync()`
  - [ ] `GetAllAsync()`
  - [ ] `AddAsync()`
  - [ ] `UpdateAsync()`
  - [ ] `DeleteAsync()`
  - [ ] `FindAsync()` (Expression<Func<T, bool>>)
- [ ] æ·»åŠ æ‰¹é‡æ“ä½œï¼ˆå¯é€‰ï¼‰
  - [ ] `AddRangeAsync()`
  - [ ] `UpdateRangeAsync()`
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### ä»»åŠ¡ 2.4: å®ç° UnitOfWork
- [ ] åˆ›å»º `UnitOfWork.cs`
- [ ] å®ç° `IUnitOfWork` æ¥å£
  - [ ] `Repository<T>()` æ–¹æ³•
  - [ ] `SaveChangesAsync()`
  - [ ] `BeginTransactionAsync()`
  - [ ] `CommitAsync()`
  - [ ] `RollbackAsync()`
- [ ] ç®¡ç† Repository å®ä¾‹ç¼“å­˜
- [ ] å®ç° `IDisposable`
- [ ] æ³¨å†Œåˆ° DIï¼ˆScopedï¼‰
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

#### ä»»åŠ¡ 2.5: æ‰©å±• CharacterRepository
- [ ] ç»§æ‰¿ `GenericRepository<Character>`
- [ ] å®ç°è‡ªå®šä¹‰æ–¹æ³•
  - [ ] `GetByUserIdAsync()`ï¼ˆå¦‚éœ€è¦ï¼‰
  - [ ] `GetByUserWithStatsAsync()`ï¼ˆå¦‚éœ€è¦ï¼‰
  - [ ] `SearchByNameAsync()`ï¼ˆå¦‚éœ€è¦ï¼‰

#### ä»»åŠ¡ 2.6: æ‰©å±• BattleRepository
- [ ] ç»§æ‰¿ `GenericRepository<BattleRecord>`
- [ ] ä¿ç•™ç°æœ‰è‡ªå®šä¹‰æ–¹æ³•
  - [ ] `GetWithSegmentsAsync()`
  - [ ] `ExistsAsync()`
  - [ ] `UpdateRewardsAsync()`

#### ä»»åŠ¡ 2.7: è¿ç§»ç°æœ‰ä»£ç 
- [ ] æ‰«ææ‰€æœ‰ç›´æ¥ä½¿ç”¨ `_db` çš„åœ°æ–¹
- [ ] é€ä¸€é‡æ„ä¸ºä½¿ç”¨ Repository
- [ ] è¿è¡Œå›å½’æµ‹è¯•

---

## ğŸ—„ï¸ Phase 3: ç¼“å­˜ç³»ç»Ÿå®Œå–„

### æ­¥éª¤ 3.1: å®ç° IMultiTierCache
- [ ] åˆ›å»º `MultiTierCacheManager.cs`
- [ ] å®ç°åŸºç¡€æ“ä½œ
  - [ ] `GetAsync<T>()`
  - [ ] `SetAsync<T>()`
  - [ ] `RemoveAsync()`
- [ ] å®ç°æ‰¹é‡æ“ä½œ
  - [ ] `GetManyAsync<T>()`
  - [ ] `SetManyAsync<T>()`
- [ ] å®ç°å¤±æ•ˆæœºåˆ¶
  - [ ] `InvalidateByTagAsync()`
  - [ ] `InvalidateByPatternAsync()`
- [ ] å®ç°ç»Ÿè®¡
  - [ ] `GetStatistics()`
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### æ­¥éª¤ 3.2: åˆ›å»ºç¼“å­˜ç­–ç•¥
- [ ] åˆ›å»º `CharacterCacheStrategy.cs`
  - [ ] å®šä¹‰ç¼“å­˜é”®æ ¼å¼ï¼š`character:{id}`
  - [ ] è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š30åˆ†é’Ÿ
  - [ ] å®ç° Get/Set/Invalidate
- [ ] åˆ›å»º `ConfigCacheStrategy.cs`
  - [ ] å®šä¹‰ç¼“å­˜é”®æ ¼å¼ï¼š`config:{type}`
  - [ ] è®¾ç½®è¿‡æœŸæ—¶é—´ï¼š60åˆ†é’Ÿ
  - [ ] å®ç° Get/Set/Invalidate

### æ­¥éª¤ 3.3: é›†æˆç¼“å­˜åˆ° Repository
- [ ] åˆ›å»º `CacheAwareRepository<T>` è£…é¥°å™¨æ¨¡å¼
- [ ] æˆ–ï¼šåœ¨ Repository ä¸­ç›´æ¥é›†æˆç¼“å­˜
- [ ] æ›´æ–° `CharacterRepository` ä½¿ç”¨ç¼“å­˜
  - [ ] `GetByIdAsync()` å…ˆæŸ¥ç¼“å­˜
  - [ ] `UpdateAsync()` åå¤±æ•ˆç¼“å­˜
  - [ ] `DeleteAsync()` åå¤±æ•ˆç¼“å­˜
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•éªŒè¯ç¼“å­˜æ•ˆæœ

### æ­¥éª¤ 3.4: é…ç½®ç¼“å­˜å±‚æ¬¡
- [ ] æ›´æ–° `appsettings.json` æ·»åŠ ç¼“å­˜é…ç½®
- [ ] å®ç° L1 ç¼“å­˜ï¼ˆMemoryCacheï¼‰
- [ ] é¢„ç•™ L2 ç¼“å­˜æ¥å£ï¼ˆRedisï¼Œæœªæ¥ï¼‰
- [ ] é…ç½®ç¼“å­˜ç­–ç•¥å‚æ•°

---

## âš™ï¸ Phase 4: é…ç½®ç®¡ç†ç³»ç»Ÿ

### æ­¥éª¤ 4.1: å®ç° JsonConfigProvider
- [ ] åˆ›å»º `JsonConfigProvider.cs`
- [ ] å®ç° `IConfigProvider` æ¥å£
  - [ ] `Get<T>(string key)`
  - [ ] `GetAll<T>()`
  - [ ] `ReloadAsync()`
  - [ ] `CurrentVersion` å±æ€§
- [ ] æ·»åŠ é…ç½®å˜æ›´äº‹ä»¶ `OnConfigChanged`
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### æ­¥éª¤ 4.2: åˆ›å»ºé…ç½®æ–‡ä»¶ç»“æ„
- [ ] åˆ›å»º `GameData/Config/` ç›®å½•
- [ ] åˆ›å»ºé…ç½®æ–‡ä»¶
  - [ ] `version.json`
  - [ ] `Skills.json`ï¼ˆå¦‚å·²æœ‰ï¼‰
  - [ ] `Gears.json`ï¼ˆå¦‚å·²æœ‰ï¼‰
  - [ ] `Enemies.json`ï¼ˆå¦‚å·²æœ‰ï¼‰
  - [ ] `Professions.json`ï¼ˆå¦‚å·²æœ‰ï¼‰
- [ ] å®šä¹‰é…ç½®æ–‡ä»¶æ ¼å¼è§„èŒƒ

### æ­¥éª¤ 4.3: é…ç½®éªŒè¯å™¨
- [ ] åˆ›å»º `SkillConfigValidator.cs`
- [ ] åˆ›å»º `EquipmentConfigValidator.cs`
- [ ] é›†æˆ FluentValidation
- [ ] åœ¨é…ç½®åŠ è½½æ—¶è‡ªåŠ¨éªŒè¯
- [ ] ç¼–å†™éªŒè¯æµ‹è¯•

### æ­¥éª¤ 4.4: é…ç½®çƒ­æ›´æ–°
- [ ] åˆ›å»º `ConfigAdminController.cs`
- [ ] å®ç° `/api/admin/config/reload` ç«¯ç‚¹
- [ ] å®ç° `/api/admin/config/version` ç«¯ç‚¹
- [ ] æ·»åŠ æƒé™éªŒè¯ï¼ˆå¯é€‰ï¼‰
- [ ] æµ‹è¯•çƒ­æ›´æ–°æµç¨‹

---

## ğŸ“œ Phase 5: äº‹ä»¶æº¯æºä¸å¿«ç…§

### æ­¥éª¤ 5.1: å®šä¹‰äº‹ä»¶å­˜å‚¨æ¥å£
- [ ] åˆ›å»º `IEventStore.cs`
- [ ] åˆ›å»º `ISnapshotStore.cs`
- [ ] å®šä¹‰ `EventRecord` å®ä½“
- [ ] å®šä¹‰ `SnapshotRecord` å®ä½“

### æ­¥éª¤ 5.2: å®ç°äº‹ä»¶å­˜å‚¨
- [ ] åˆ›å»º `EventStore.cs`
- [ ] å®ç° `AppendAsync()`
- [ ] å®ç° `AppendBatchAsync()`
- [ ] å®ç° `GetEventsAsync()`
- [ ] å®ç° `GetEventsSinceAsync()`
- [ ] æ·»åŠ åºåˆ—åŒ–/ååºåˆ—åŒ–é€»è¾‘
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### æ­¥éª¤ 5.3: å®ç°å¿«ç…§å­˜å‚¨
- [ ] åˆ›å»º `SnapshotStore.cs`
- [ ] å®ç° `SaveSnapshotAsync<T>()`
- [ ] å®ç° `GetLatestSnapshotAsync<T>()`
- [ ] æ·»åŠ åºåˆ—åŒ–/ååºåˆ—åŒ–é€»è¾‘
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

### æ­¥éª¤ 5.4: é›†æˆåˆ°æˆ˜æ–—ç³»ç»Ÿ
- [ ] åœ¨ `BattleEngine` ä¸­å‘å¸ƒäº‹ä»¶
- [ ] è®¢é˜…äº‹ä»¶å¹¶å­˜å‚¨
- [ ] å®šæœŸåˆ›å»ºå¿«ç…§
- [ ] æµ‹è¯•äº‹ä»¶é‡æ”¾åŠŸèƒ½

---

## âœ… éªŒæ”¶æ ‡å‡†

### Phase 0 å®Œæˆæ ‡å¿—
- [ ] æ‰€æœ‰æ¥å£å®šä¹‰å®Œæˆä¸”ç¼–è¯‘é€šè¿‡
- [ ] ç›®å½•ç»“æ„åˆ›å»ºå®Œæ•´
- [ ] ä¾èµ–åŒ…å®‰è£…æˆåŠŸ
- [ ] æµ‹è¯•åŸºç¡€è®¾æ–½å°±ç»ª

### Phase 1 å®Œæˆæ ‡å¿—
- [ ] EventBus å®ç°å¹¶é€šè¿‡æµ‹è¯•
- [ ] è‡³å°‘å®šä¹‰ 3 ä¸ªé¢†åŸŸäº‹ä»¶
- [ ] DI æ³¨å†Œæ­£ç¡®
- [ ] SignalR æ¥å£é¢„ç•™å®Œæˆ

### Phase 2 å®Œæˆæ ‡å¿—
- [ ] CharactersController ä¸å†ç›´æ¥ä½¿ç”¨ DbContext
- [ ] StepBattleSnapshotService ä½¿ç”¨ Repository
- [ ] UnitOfWork å®ç°å®Œæˆ
- [ ] è‡³å°‘ 3 ä¸ª Repository å®ç°
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æ— é€€åŒ–ï¼ˆå¯¹æ¯”åŸºå‡†ï¼‰

### Phase 3 å®Œæˆæ ‡å¿—
- [ ] MultiTierCache å®ç°å®Œæˆ
- [ ] è‡³å°‘ 2 ä¸ªç¼“å­˜ç­–ç•¥å®ç°
- [ ] ç¼“å­˜é›†æˆåˆ° Repository
- [ ] ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§å¯è§
- [ ] æ€§èƒ½æå‡å¯æµ‹é‡

### Phase 4 å®Œæˆæ ‡å¿—
- [ ] JsonConfigProvider å®ç°å®Œæˆ
- [ ] è‡³å°‘ 3 ç§é…ç½®æ–‡ä»¶åˆ›å»º
- [ ] é…ç½®éªŒè¯å™¨å®ç°
- [ ] çƒ­æ›´æ–° API æµ‹è¯•é€šè¿‡
- [ ] é…ç½®ç‰ˆæœ¬ç®¡ç†å¯ç”¨

### Phase 5 å®Œæˆæ ‡å¿—
- [ ] EventStore å®ç°å®Œæˆ
- [ ] SnapshotStore å®ç°å®Œæˆ
- [ ] æˆ˜æ–—äº‹ä»¶å¯æŒä¹…åŒ–
- [ ] å¿«ç…§åˆ›å»ºä¸æ¢å¤æµ‹è¯•é€šè¿‡
- [ ] äº‹ä»¶é‡æ”¾éªŒè¯é€šè¿‡

---

## ğŸ“Š è¿›åº¦è·Ÿè¸ª

### æ€»ä½“è¿›åº¦

```
Phase 0: å‡†å¤‡é˜¶æ®µ          [â–ˆâ–‘â–‘â–‘â–‘] 20%  (æ­¥éª¤ 0.1 å·²å®Œæˆ)
Phase 1: SignalR é‡æ„      [â–‘â–‘â–‘â–‘â–‘]  0%
Phase 2: æŒä¹…åŒ–å±‚é‡æ„      [â–‘â–‘â–‘â–‘â–‘]  0%
Phase 3: ç¼“å­˜ç³»ç»Ÿå®Œå–„      [â–‘â–‘â–‘â–‘â–‘]  0%
Phase 4: é…ç½®ç®¡ç†ç³»ç»Ÿ      [â–‘â–‘â–‘â–‘â–‘]  0%
Phase 5: äº‹ä»¶æº¯æºä¸å¿«ç…§    [â–‘â–‘â–‘â–‘â–‘]  0%

æ€»è®¡è¿›åº¦: [â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 3%
```

### å…³é”®é‡Œç¨‹ç¢‘

- [ ] **é‡Œç¨‹ç¢‘ 1**: Phase 0 å®Œæˆï¼ˆé¢„è®¡ï¼šæœ¬å‘¨ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 2**: Phase 1-2 å®Œæˆï¼ˆé¢„è®¡ï¼š3å‘¨ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 3**: Phase 3-4 å®Œæˆï¼ˆé¢„è®¡ï¼š6å‘¨ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 4**: Phase 5 å®Œæˆï¼ˆé¢„è®¡ï¼š8å‘¨ï¼‰
- [ ] **é‡Œç¨‹ç¢‘ 5**: å…¨éƒ¨åŸºç¡€è®¾æ–½é‡æ„å®Œæˆï¼ˆé¢„è®¡ï¼š11å‘¨ï¼‰

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

### å¦‚ä½•ä½¿ç”¨æœ¬æ£€æŸ¥æ¸…å•

1. **æŒ‰é¡ºåºæ‰§è¡Œ**: å¿…é¡»æŒ‰ Phase 0 â†’ Phase 1 â†’ ... é¡ºåºæ‰§è¡Œ
2. **å®Œæˆæ ‡è®°**: å®Œæˆä¸€é¡¹åï¼Œå°† `[ ]` æ”¹ä¸º `[x]`
3. **è®°å½•é—®é¢˜**: é‡åˆ°é—®é¢˜åœ¨ä¸‹æ–¹"é—®é¢˜è·Ÿè¸ª"è®°å½•
4. **å®šæœŸå¤å®¡**: æ¯å‘¨å¤å®¡è¿›åº¦ï¼Œæ›´æ–°ç™¾åˆ†æ¯”
5. **ç‰ˆæœ¬æ§åˆ¶**: æ¯æ¬¡æ›´æ–°åæäº¤åˆ° Git

### é—®é¢˜è·Ÿè¸ª

åœ¨æ­¤è®°å½•æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š

```
æ—¥æœŸ       | Phase | é—®é¢˜æè¿°                | çŠ¶æ€    | è´Ÿè´£äºº
---------- | ----- | ----------------------- | ------- | ------
2025-10-21 | 0.1   | ä»£ç å®¡è®¡å®Œæˆ            | å·²è§£å†³  | Copilot
           |       |                         |         |
           |       |                         |         |
```

---

**æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ21æ—¥  
**ç»´æŠ¤äºº**: GitHub Copilot Agent

