# 活动计划管理 UI 预览

## 界面布局

```
┌─────────────────────────────────────────────────────────────────┐
│ 1.6. 活动计划管理 (Activity Plans)                              │
├─────────────────────────────────────────────────────────────────┤
│ [刷新槽位]  ☑ 自动刷新 (每2秒)                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│ ╔═══════════════════════════════════════════════════════════╗  │
│ ║ 槽位 0 🔥                                                  ║  │
│ ╠═══════════════════════════════════════════════════════════╣  │
│ ║ ┌───────────────────────────────────────────────────┐     ║  │
│ ║ │ ▶️ COMBAT    ID: a1b2c3d4...         [取消]       │     ║  │
│ ║ │ 限制: duration (按时长)                            │     ║  │
│ ║ │ 进度: 45.0秒                                       │     ║  │
│ ║ │ ████████████░░░░░░░░ 75%                          │     ║  │
│ ║ └───────────────────────────────────────────────────┘     ║  │
│ ║                                                            ║  │
│ ║ 队列中 (2):                                                ║  │
│ ║ ┌───────────────────────────────────────────────────┐     ║  │
│ ║ │ ⏳ combat - count (按计数)            [移除]     │     ║  │
│ ║ └───────────────────────────────────────────────────┘     ║  │
│ ║ ┌───────────────────────────────────────────────────┐     ║  │
│ ║ │ ⏳ combat - duration (按时长)         [移除]     │     ║  │
│ ║ └───────────────────────────────────────────────────┘     ║  │
│ ║                                                            ║  │
│ ║ ─────────────────────────────────────────────────────     ║  │
│ ║ 创建新计划:                                                ║  │
│ ║ [限制类型▼] [时长(秒)] [战斗模式▼] [敌人▼] [添加到槽位]  ║  │
│ ╚═══════════════════════════════════════════════════════════╝  │
│                                                                  │
│ ╔═══════════════════════════════════════════════════════════╗  │
│ ║ 槽位 1 💤                                                  ║  │
│ ╠═══════════════════════════════════════════════════════════╣  │
│ ║ 空闲                                                       ║  │
│ ║                                                            ║  │
│ ║ ─────────────────────────────────────────────────────     ║  │
│ ║ 创建新计划:                                                ║  │
│ ║ [限制类型▼] [时长(秒)] [战斗模式▼] [敌人▼] [添加到槽位]  ║  │
│ ╚═══════════════════════════════════════════════════════════╝  │
│                                                                  │
│ ╔═══════════════════════════════════════════════════════════╗  │
│ ║ 槽位 2 ⏸️                                                  ║  │
│ ╠═══════════════════════════════════════════════════════════╣  │
│ ║ ┌───────────────────────────────────────────────────┐     ║  │
│ ║ │ ✅ COMBAT    ID: e5f6g7h8...         [取消]       │     ║  │
│ ║ │ 限制: count (按计数)                               │     ║  │
│ ║ │ 进度: 100次                                        │     ║  │
│ ║ │ ████████████████████ 100%                         │     ║  │
│ ║ └───────────────────────────────────────────────────┘     ║  │
│ ║                                                            ║  │
│ ║ ─────────────────────────────────────────────────────     ║  │
│ ║ 创建新计划:                                                ║  │
│ ║ [限制类型▼] [时长(秒)] [战斗模式▼] [敌人▼] [添加到槽位]  ║  │
│ ╚═══════════════════════════════════════════════════════════╝  │
└─────────────────────────────────────────────────────────────────┘
```

## UI 元素说明

### 顶部控制栏
- **刷新槽位按钮**: 手动触发一次槽位状态更新
- **自动刷新复选框**: 启用后每2秒自动刷新槽位状态

### 槽位卡片

每个槽位显示为一个独立的卡片，包含：

#### 槽位标题
- 槽位编号（0, 1, 2...）
- 状态图标：
  - 🔥 运行中
  - 💤 空闲
  - ⏸️ 待定/暂停

#### 当前计划（如果有）
显示在灰色背景区域：
- **状态图标 + 类型**: 
  - ⏳ pending（待定）
  - ▶️ running（运行中）
  - ✅ completed（已完成）
  - ❌ cancelled（已取消）
- **计划ID**: 显示前8位
- **取消按钮**: 停止当前计划
- **限制信息**: duration/count/infinite
- **进度信息**: 根据类型显示秒数或计数
- **进度条**: 
  - 绿色 - 运行中
  - 蓝色 - 已完成
  - 灰色 - 已取消
  - 黄色 - 待定

#### 队列区域（如果有）
显示在黄色背景区域：
- 列出所有等待执行的计划
- 每个计划可以单独移除
- 显示计划类型和限制信息

#### 创建新计划表单
每个槽位底部都有创建表单：
- **限制类型下拉框**: 时长/计数/无限
- **限制值输入**: 根据类型显示（无限时隐藏）
- **战斗模式下拉框**: Duration/Continuous/Dungeon单次/Dungeon循环
- **敌人选择**: 从服务器加载的敌人列表
- **添加按钮**: 创建计划并添加到当前槽位

## 交互流程

### 场景1: 创建第一个计划

1. 用户选择空闲的槽位1
2. 选择"时长" 60秒
3. 选择"Duration"模式
4. 选择敌人"Training Dummy"
5. 点击"添加到槽位"
6. 计划立即开始运行（显示▶️图标）
7. 进度条开始增长
8. 60秒后自动完成（显示✅图标）

### 场景2: 添加到队列

1. 槽位0已有正在运行的计划
2. 用户在槽位0创建新计划
3. 新计划被添加到队列（显示⏳图标）
4. 当前计划完成后，队列中的计划自动开始

### 场景3: 取消计划

1. 用户点击运行中计划的"取消"按钮
2. 计划立即停止（显示❌图标）
3. 如果队列中有其他计划，下一个自动开始

### 场景4: 监控多个槽位

1. 启用"自动刷新"
2. 同时在槽位0、1、2创建计划
3. 界面每2秒更新所有槽位状态
4. 可以看到三个计划并行执行
5. 进度条实时更新

## 状态图标含义

| 图标 | 含义 | 适用对象 |
|------|------|----------|
| 🔥 | 运行中 | 槽位标题 |
| 💤 | 空闲 | 槽位标题 |
| ⏸️ | 有计划但非运行 | 槽位标题 |
| ⏳ | 待定 | 计划状态 |
| ▶️ | 运行中 | 计划状态 |
| ✅ | 已完成 | 计划状态 |
| ❌ | 已取消 | 计划状态 |

## 颜色编码

| 颜色 | 含义 | 使用位置 |
|------|------|----------|
| 灰色 (#f8f9fa) | 当前计划背景 | 计划卡片 |
| 黄色 (#fff3cd) | 队列计划背景 | 队列项 |
| 绿色 (#28a745) | 运行中 | 进度条 |
| 蓝色 (#007bff) | 已完成 | 进度条 |
| 灰色 (#6c757d) | 已取消 | 进度条 |
| 黄色 (#ffc107) | 待定 | 进度条 |

## 响应式设计

- 表单元素使用flexbox布局，自动换行
- 卡片采用Bootstrap样式，适应不同屏幕
- 按钮尺寸适中，便于点击
- 移动端可能需要额外优化

## 错误处理

- API调用失败时显示红色警告框
- 按钮在busy状态下禁用
- 清晰的错误消息提示用户

## 性能优化

- 使用轮询而非WebSocket（简化实现）
- 轮询间隔可配置（默认2秒）
- 可选的自动刷新（避免不必要的请求）
- 批量获取所有槽位（单次API调用）
