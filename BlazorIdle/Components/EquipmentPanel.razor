@using BlazorIdle.Client.Services

@* è£…å¤‡ç³»ç»ŸUIé¢„ç•™ - Step 5: è£…å¤‡ç³»ç»ŸUIé¢„ç•™ *@
<div class="equipment-panel" style="margin-top: 18px; padding: 12px; background: #fef5e7; border-radius: 6px; border: 1px solid #f9e79f;">
    <h6 style="margin: 0 0 12px 0; font-size: 14px; display: flex; align-items: center; gap: 6px;">
        <span>ğŸ’</span>
        <span>è£…å¤‡ä¸å±æ€§</span>
        <span style="margin-left: auto; font-size: 11px; color: #999; font-weight: normal;">(é¢„ç•™åŠŸèƒ½)</span>
    </h6>
    
    @* è£…å¤‡æ§½ä½å¸ƒå±€ *@
    <div class="equipment-slots" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px;">
        @* ç¬¬ä¸€è¡Œï¼šå¤´ç›”å±…ä¸­ *@
        <div></div>
        @RenderSlot("head", "ğŸª–", "å¤´ç›”")
        <div></div>
        
        @* ç¬¬äºŒè¡Œï¼šæ­¦å™¨ã€èƒ¸ç”²ã€å‰¯æ‰‹ *@
        @RenderSlot("weapon", "âš”ï¸", "æ­¦å™¨")
        @RenderSlot("chest", "ğŸ›¡ï¸", "èƒ¸ç”²")
        @RenderSlot("offhand", "ğŸ”°", "å‰¯æ‰‹")
        
        @* ç¬¬ä¸‰è¡Œï¼šè…°å¸¦ã€è…¿éƒ¨ã€é‹å­ *@
        @RenderSlot("belt", "ğŸ”—", "è…°å¸¦")
        @RenderSlot("legs", "ğŸ‘–", "è…¿éƒ¨")
        @RenderSlot("boots", "ğŸ‘¢", "é‹å­")
        
        @* ç¬¬å››è¡Œï¼šä¸¤ä¸ªé¥°å“å±…ä¸­ *@
        <div></div>
        <div style="display: flex; gap: 8px;">
            @RenderSlot("trinket1", "ğŸ’", "é¥°å“1")
            @RenderSlot("trinket2", "ğŸ’", "é¥°å“2")
        </div>
        <div></div>
    </div>
    
    @* è£…å¤‡æ€»å±æ€§æ˜¾ç¤º *@
    <div class="equipment-stats" style="padding: 10px; background: #fff; border-radius: 4px; border: 1px solid #e8dabc;">
        <div style="font-size: 12px; font-weight: bold; margin-bottom: 6px; color: #7d6e53;">ğŸ“Š è£…å¤‡æ€»å±æ€§</div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 4px; font-size: 11px;">
            <div style="display: flex; align-items: center; gap: 4px;">
                <span>âš”ï¸</span>
                <span>æ”»å‡»åŠ›:</span>
                <span style="font-weight: bold; color: #666;">-- (+0)</span>
            </div>
            <div style="display: flex; align-items: center; gap: 4px;">
                <span>ğŸ›¡ï¸</span>
                <span>æŠ¤ç”²:</span>
                <span style="font-weight: bold; color: #666;">-- (+0)</span>
            </div>
            <div style="display: flex; align-items: center; gap: 4px;">
                <span>âš¡</span>
                <span>æ€¥é€Ÿ:</span>
                <span style="font-weight: bold; color: #666;">-- (+0%)</span>
            </div>
            <div style="display: flex; align-items: center; gap: 4px;">
                <span>ğŸ’¥</span>
                <span>æš´å‡»:</span>
                <span style="font-weight: bold; color: #666;">-- (+0%)</span>
            </div>
        </div>
        <div style="margin-top: 6px; padding-top: 6px; border-top: 1px solid #f0f0f0; font-size: 10px; color: #999; text-align: center;">
            è£…å¤‡ç³»ç»ŸåŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…
        </div>
    </div>
</div>

@code {
    /// <summary>è§’è‰²ID</summary>
    [Parameter] public Guid CharacterId { get; set; }
    
    /// <summary>æ˜¯å¦æ˜¾ç¤ºé¢æ¿ï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰</summary>
    [Parameter] public bool Show { get; set; } = true;
    
    /// <summary>æ¸²æŸ“è£…å¤‡æ§½ä½</summary>
    private RenderFragment RenderSlot(string slotType, string icon, string slotName) => __builder =>
    {
        <div class="equipment-slot" 
             style="background: #fff; border: 2px dashed #ddd; border-radius: 6px; padding: 8px; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 70px; cursor: help;"
             title="@slotName (æœªè£…å¤‡)">
            
            @* æ§½ä½å›¾æ ‡ *@
            <div style="font-size: 24px; opacity: 0.3; margin-bottom: 4px;">@icon</div>
            
            @* æ§½ä½åç§° *@
            <div style="font-size: 10px; color: #999; text-align: center;">@slotName</div>
            
            @* ç©ºæ§½æŒ‡ç¤º *@
            <div style="font-size: 9px; color: #ccc; margin-top: 2px;">ç©º</div>
        </div>
    };
    
    /// <summary>è·å–è£…å¤‡æ§½ä½å›¾æ ‡</summary>
    private string GetSlotIcon(string slotType) => slotType switch
    {
        "head" => "ğŸª–",
        "weapon" => "âš”ï¸",
        "chest" => "ğŸ›¡ï¸",
        "offhand" => "ğŸ”°",
        "belt" => "ğŸ”—",
        "legs" => "ğŸ‘–",
        "boots" => "ğŸ‘¢",
        "trinket1" => "ğŸ’",
        "trinket2" => "ğŸ’",
        _ => "â“"
    };
    
    /// <summary>è·å–è£…å¤‡æ§½ä½ä¸­æ–‡åç§°</summary>
    private string GetSlotName(string slotType) => slotType switch
    {
        "head" => "å¤´ç›”",
        "weapon" => "æ­¦å™¨",
        "chest" => "èƒ¸ç”²",
        "offhand" => "å‰¯æ‰‹",
        "belt" => "è…°å¸¦",
        "legs" => "è…¿éƒ¨",
        "boots" => "é‹å­",
        "trinket1" => "é¥°å“1",
        "trinket2" => "é¥°å“2",
        _ => "æœªçŸ¥"
    };
}
